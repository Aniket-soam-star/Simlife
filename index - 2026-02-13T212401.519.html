<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BitLife - Life Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #f5f5f5;
            overflow-x: hidden;
        }
        
        /* Top Bar */
        .top-bar {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 12px 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .menu-icon, .back-icon {
            width: 35px;
            height: 35px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.3rem;
            cursor: pointer;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .logo-icon {
            width: 35px;
            height: 35px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .logo-text {
            font-size: 1.6rem;
            font-weight: 700;
            color: #fff100;
            text-shadow: 2px 2px 0 #e74c3c;
        }
        
        /* Character Panel */
        .char-panel {
            background: white;
            margin: 15px;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .char-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .char-avatar {
            width: 50px;
            height: 50px;
            font-size: 2rem;
        }
        
        .char-name-section {
            flex: 1;
        }
        
        .char-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 3px;
        }
        
        .char-status {
            font-size: 0.85rem;
            color: #666;
        }
        
        .bank-balance {
            text-align: right;
        }
        
        .balance-label {
            font-size: 0.75rem;
            color: #666;
        }
        
        .balance-amount {
            font-size: 1.1rem;
            font-weight: 700;
            color: #16a34a;
        }
        
        .char-story {
            line-height: 1.7;
            color: #333;
            font-size: 0.95rem;
        }
        
        .char-story p {
            margin-bottom: 8px;
        }
        
        /* Content Sections */
        .content-list {
            background: white;
            margin: 15px;
            margin-bottom: 200px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        
        .section-header {
            padding: 20px;
            border-bottom: 2px solid #f0f0f0;
            position: sticky;
            top: 59px;
            background: white;
            z-index: 10;
            border-radius: 12px 12px 0 0;
        }
        
        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #111;
        }
        
        .list-item {
            padding: 18px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .list-item:hover {
            background: #f8fafc;
        }
        
        .list-item:last-child {
            border-bottom: none;
        }
        
        .item-icon {
            font-size: 1.8rem;
            width: 45px;
            text-align: center;
            flex-shrink: 0;
        }
        
        .item-text {
            flex: 1;
            min-width: 0;
        }
        
        .item-name {
            font-size: 1rem;
            font-weight: 600;
            color: #111;
            margin-bottom: 3px;
        }
        
        .item-desc {
            font-size: 0.85rem;
            color: #666;
        }
        
        .item-value {
            font-size: 0.9rem;
            color: #16a34a;
            font-weight: 600;
            flex-shrink: 0;
        }
        
        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: #1e3a5f;
            padding: 12px 0 8px 0;
            box-shadow: 0 -3px 15px rgba(0,0,0,0.2);
            z-index: 99;
        }
        
        .nav-buttons {
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 10px;
        }
        
        .nav-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            transition: all 0.3s;
            flex: 1;
            max-width: 70px;
        }
        
        .nav-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255,255,255,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            transition: all 0.3s;
        }
        
        .nav-btn.active .nav-icon {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .nav-label {
            font-size: 0.65rem;
            color: white;
            font-weight: 600;
            text-align: center;
        }
        
        .age-btn {
            width: 65px;
            height: 65px;
            border-radius: 50%;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.2rem;
            color: white;
            box-shadow: 0 6px 20px rgba(34, 197, 94, 0.4);
            cursor: pointer;
            transition: all 0.3s;
            border: 5px solid #1e3a5f;
            margin-top: -15px;
        }
        
        .age-btn:hover {
            transform: scale(1.05);
        }
        
        .age-btn:active {
            transform: scale(0.95);
        }
        
        /* Stats Bar */
        .stats-bar {
            background: white;
            padding: 12px 15px 15px 15px;
        }
        
        .stat-row {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }
        
        .stat-row:last-child {
            margin-bottom: 0;
        }
        
        .stat-label {
            display: flex;
            align-items: center;
            gap: 5px;
            width: 85px;
            font-size: 0.8rem;
            color: #555;
            flex-shrink: 0;
        }
        
        .stat-emoji {
            font-size: 1rem;
        }
        
        .stat-bar-bg {
            flex: 1;
            height: 16px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .stat-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #16a34a);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .stat-value {
            position: absolute;
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.7rem;
            font-weight: 700;
            color: #111;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 999;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            border-radius: 15px;
            max-width: 450px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .modal-title {
            font-size: 1.4rem;
            font-weight: 700;
            color: #111;
            margin-bottom: 5px;
        }
        
        .modal-subtitle {
            font-size: 0.9rem;
            color: #666;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .choice-item {
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.2s;
            border: 2px solid transparent;
        }
        
        .choice-item:hover {
            background: #e0f2fe;
            border-color: #2563eb;
        }
        
        .choice-text {
            font-size: 0.95rem;
            color: #111;
            font-weight: 500;
        }
        
        .close-btn {
            width: 100%;
            padding: 15px;
            background: #e5e7eb;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            color: #111;
            cursor: pointer;
            margin-top: 10px;
        }
        
        /* Start Screen */
        .start-screen {
            min-height: 100vh;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .start-logo {
            font-size: 3.5rem;
            color: #fff100;
            text-shadow: 3px 3px 0 rgba(0,0,0,0.2);
            margin-bottom: 30px;
            font-weight: 700;
        }
        
        .start-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-height: 85vh;
            overflow-y: auto;
        }
        
        .start-card h2 {
            font-size: 1.6rem;
            margin-bottom: 20px;
            color: #111;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            font-size: 0.85rem;
            color: #555;
            margin-bottom: 6px;
            font-weight: 600;
        }
        
        .form-input,
        .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        
        .form-input:focus,
        .form-select:focus {
            outline: none;
            border-color: #e74c3c;
        }
        
        .start-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4);
        }
        
        .random-btn {
            background: white;
            color: #e74c3c;
            border: 2px solid #e74c3c;
        }
        
        /* Death Screen */
        .death-screen {
            min-height: 100vh;
            background: linear-gradient(135deg, #111, #333);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .death-card {
            background: white;
            padding: 35px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        
        .death-card h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: #111;
        }
        
        .death-message {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .life-stats {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .life-stat-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .life-stat-row:last-child {
            border-bottom: none;
        }
        
        .stat-name {
            font-weight: 600;
            color: #555;
        }
        
        .stat-val {
            font-weight: 700;
            color: #111;
        }
        
        .new-life-btn {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .screen {
            display: none;
        }
        
        .screen.active {
            display: block;
        }
        
        /* Events */
        .event-item {
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            margin: 15px;
            border-left: 4px solid #2563eb;
        }
        
        .event-item.positive {
            border-left-color: #16a34a;
            background: #f0fdf4;
        }
        
        .event-item.negative {
            border-left-color: #dc2626;
            background: #fef2f2;
        }
        
        .event-text {
            font-size: 0.95rem;
            line-height: 1.6;
            color: #333;
        }
        
        .relationship-bar {
            width: 70px;
            height: 8px;
            background: #e5e7eb;
            border-radius: 10px;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .relationship-fill {
            height: 100%;
            background: linear-gradient(90deg, #22c55e, #16a34a);
            border-radius: 10px;
        }
        
        .category-header {
            padding: 15px 20px;
            background: #f8fafc;
            font-weight: 700;
            color: #2563eb;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div id="startScreen" class="screen active">
        <div class="start-screen">
            <div class="start-logo">BitLife</div>
            <div class="start-card">
                <h2>Create Your Life</h2>
                <div class="form-group">
                    <label class="form-label">First Name</label>
                    <input type="text" id="firstName" class="form-input" placeholder="First name">
                </div>
                <div class="form-group">
                    <label class="form-label">Last Name</label>
                    <input type="text" id="lastName" class="form-input" placeholder="Last name">
                </div>
                <div class="form-group">
                    <label class="form-label">Gender</label>
                    <select id="gender" class="form-select">
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Country</label>
                    <select id="country" class="form-select">
                        <option value="United States">üá∫üá∏ United States</option>
                        <option value="United Kingdom">üá¨üáß United Kingdom</option>
                        <option value="Canada">üá®üá¶ Canada</option>
                        <option value="Australia">üá¶üá∫ Australia</option>
                        <option value="Germany">üá©üá™ Germany</option>
                        <option value="France">üá´üá∑ France</option>
                        <option value="Japan">üáØüáµ Japan</option>
                        <option value="Brazil">üáßüá∑ Brazil</option>
                        <option value="India">üáÆüá≥ India</option>
                        <option value="Mexico">üá≤üáΩ Mexico</option>
                    </select>
                </div>
                <button class="start-btn" onclick="startGame(false)">Start Custom Life</button>
                <button class="start-btn random-btn" onclick="startGame(true)">Start Random Life</button>
            </div>
        </div>
    </div>

    <!-- Main Game Screen -->
    <div id="gameScreen" class="screen">
        <div class="top-bar">
            <div class="back-icon" id="backBtn" onclick="goBack()" style="display: none;">‚Üê</div>
            <div class="menu-icon" id="menuBtn">‚ò∞</div>
            <div class="logo">
                <div class="logo-icon">üéÆ</div>
                <div class="logo-text">BitLife</div>
            </div>
            <div style="width: 35px;"></div>
        </div>

        <div id="mainView" class="game-view">
            <div class="char-panel">
                <div class="char-header">
                    <div class="char-avatar" id="avatar">üë∂</div>
                    <div class="char-name-section">
                        <div class="char-name" id="charName">Baby</div>
                        <div class="char-status" id="charStatus">Infant</div>
                    </div>
                    <div class="bank-balance">
                        <div class="balance-label">Bank Balance</div>
                        <div class="balance-amount" id="balance">$0</div>
                    </div>
                </div>
                <div class="char-story" id="story"></div>
            </div>

            <div id="eventsContainer"></div>
        </div>

        <div id="activitiesView" class="game-view" style="display: none;">
            <div class="content-list">
                <div class="section-header">
                    <div class="section-title">Activities</div>
                </div>
                <div id="activitiesList"></div>
            </div>
        </div>

        <div id="relationshipsView" class="game-view" style="display: none;">
            <div class="content-list">
                <div class="section-header">
                    <div class="section-title">Relationships</div>
                </div>
                <div id="relationshipsList"></div>
            </div>
        </div>

        <div id="assetsView" class="game-view" style="display: none;">
            <div class="content-list">
                <div class="section-header">
                    <div class="section-title">Assets</div>
                </div>
                <div id="assetsList"></div>
            </div>
        </div>

        <div id="occupationView" class="game-view" style="display: none;">
            <div class="content-list">
                <div class="section-header">
                    <div class="section-title" id="occTitle">School</div>
                </div>
                <div id="occupationContent"></div>
            </div>
        </div>

        <div class="bottom-nav">
            <div class="stats-bar">
                <div class="stat-row">
                    <div class="stat-label"><span class="stat-emoji">üòä</span><span>Happiness</span></div>
                    <div class="stat-bar-bg">
                        <div class="stat-bar-fill" id="happinessBar" style="width: 100%"></div>
                        <div class="stat-value" id="happinessVal">100%</div>
                    </div>
                </div>
                <div class="stat-row">
                    <div class="stat-label"><span class="stat-emoji">‚ù§Ô∏è</span><span>Health</span></div>
                    <div class="stat-bar-bg">
                        <div class="stat-bar-fill" id="healthBar" style="width: 100%"></div>
                        <div class="stat-value" id="healthVal">100%</div>
                    </div>
                </div>
                <div class="stat-row">
                    <div class="stat-label"><span class="stat-emoji">üß†</span><span>Smarts</span></div>
                    <div class="stat-bar-bg">
                        <div class="stat-bar-fill" id="smartsBar" style="width: 50%"></div>
                        <div class="stat-value" id="smartsVal">50%</div>
                    </div>
                </div>
                <div class="stat-row">
                    <div class="stat-label"><span class="stat-emoji">‚≠ê</span><span>Looks</span></div>
                    <div class="stat-bar-bg">
                        <div class="stat-bar-fill" id="looksBar" style="width: 50%"></div>
                        <div class="stat-value" id="looksVal">50%</div>
                    </div>
                </div>
            </div>
            <div class="nav-buttons">
                <div class="nav-btn" id="navOcc" onclick="showView('occupation')">
                    <div class="nav-icon">üë∂</div>
                    <div class="nav-label" id="occLabel">Infant</div>
                </div>
                <div class="nav-btn" id="navAssets" onclick="showView('assets')">
                    <div class="nav-icon">üè†</div>
                    <div class="nav-label">Assets</div>
                </div>
                <div class="age-btn" onclick="ageUp()">+</div>
                <div class="nav-btn" id="navRel" onclick="showView('relationships')">
                    <div class="nav-icon">üë•</div>
                    <div class="nav-label">Relationships</div>
                </div>
                <div class="nav-btn" id="navAct" onclick="showView('activities')">
                    <div class="nav-icon">‚ö°</div>
                    <div class="nav-label">Activities</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Death Screen -->
    <div id="deathScreen" class="screen">
        <div class="death-screen">
            <div class="death-card">
                <h1>üíÄ R.I.P. üíÄ</h1>
                <div class="death-message" id="deathMsg"></div>
                <div class="life-stats">
                    <div class="life-stat-row">
                        <span class="stat-name">Final Age</span>
                        <span class="stat-val" id="finalAge">0</span>
                    </div>
                    <div class="life-stat-row">
                        <span class="stat-name">Net Worth</span>
                        <span class="stat-val" id="finalMoney">$0</span>
                    </div>
                    <div class="life-stat-row">
                        <span class="stat-name">Career</span>
                        <span class="stat-val" id="finalCareer">None</span>
                    </div>
                    <div class="life-stat-row">
                        <span class="stat-name">Happiness</span>
                        <span class="stat-val" id="finalHappy">0%</span>
                    </div>
                </div>
                <button class="new-life-btn" onclick="location.reload()">Start New Life</button>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modalTitle">Title</div>
                <div class="modal-subtitle" id="modalSubtitle"></div>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script>
        // Continue in next message due to length...
        // This is getting very long - I'll create a comprehensive working version
        
        let game = {
            firstName: '', lastName: '', fullName: '', age: 0, country: '', city: '', gender: '',
            birthMonth: '', zodiac: '', health: 100, happiness: 100, smarts: 50, looks: 50,
            money: 0, relationships: [], job: null, education: 'None', assets: [], 
            currentView: 'main', inPrison: false, married: false
        };

        const DATA = {
            names: {
                first: {
                    male: ['James','John','Robert','Michael','William','David','Richard','Joseph','Thomas','Christopher'],
                    female: ['Mary','Patricia','Jennifer','Linda','Elizabeth','Barbara','Susan','Jessica','Sarah','Karen']
                },
                last: ['Smith','Johnson','Williams','Brown','Jones','Garcia','Miller','Davis','Rodriguez','Martinez']
            },
            cities: {
                'United States': ['New York','Los Angeles','Chicago','Houston','Phoenix'],
                'United Kingdom': ['London','Manchester','Birmingham'],
                'Canada': ['Toronto','Montreal','Vancouver'],
                'Australia': ['Sydney','Melbourne','Brisbane'],
                'Germany': ['Berlin','Hamburg','Munich'],
                'France': ['Paris','Marseille','Lyon'],
                'Japan': ['Tokyo','Osaka','Kyoto'],
                'Brazil': ['S√£o Paulo','Rio de Janeiro'],
                'India': ['Mumbai','Delhi','Bangalore'],
                'Mexico': ['Mexico City','Guadalajara']
            },
            months: ['January','February','March','April','May','June','July','August','September','October','November','December'],
            zodiacs: ['Capricorn','Aquarius','Pisces','Aries','Taurus','Gemini','Cancer','Leo','Virgo','Libra','Scorpio','Sagittarius'],
            
            activities: [
                {id:'gym',name:'Go to the gym',icon:'üí™',effects:{health:10,looks:5,happiness:5},cost:50,minAge:13,category:'mind'},
                {id:'meditate',name:'Meditate',icon:'üßò',effects:{happiness:8,health:3},minAge:8,category:'mind'},
                {id:'library',name:'Visit the library',icon:'üìö',effects:{smarts:10,happiness:3},minAge:5,category:'mind'},
                {id:'study',name:'Study harder',icon:'üìñ',effects:{smarts:15,happiness:-5},minAge:5,category:'mind'},
                {id:'run',name:'Go for a run',icon:'üèÉ',effects:{health:12,happiness:8},minAge:8,category:'mind'},
                {id:'movies',name:'Go to the movies',icon:'üé¨',effects:{happiness:12},cost:20,minAge:5,category:'social'},
                {id:'nightclub',name:'Go to a nightclub',icon:'üï∫',effects:{happiness:20,health:-5},cost:100,minAge:18,category:'social'},
                {id:'vacation',name:'Take a vacation',icon:'‚úàÔ∏è',effects:{happiness:30,health:5},cost:3000,minAge:13,category:'social'},
                {id:'restaurant',name:'Nice restaurant',icon:'üçΩÔ∏è',effects:{happiness:15},cost:150,minAge:5,category:'social'},
                {id:'spa',name:'Visit a spa',icon:'üíÜ',effects:{happiness:25,looks:8},cost:300,minAge:18,category:'social'},
                {id:'shopping',name:'Go shopping',icon:'üõçÔ∏è',effects:{happiness:18},cost:500,minAge:13,category:'social'},
                {id:'beach',name:'Go to the beach',icon:'üèñÔ∏è',effects:{happiness:20,health:5},minAge:5,category:'social'},
                {id:'shoplift',name:'Shoplift',icon:'ü¶π',crime:true,minAge:10,category:'crime'},
                {id:'burglary',name:'Burglary',icon:'üèöÔ∏è',crime:true,minAge:16,category:'crime'},
                {id:'carTheft',name:'Grand theft auto',icon:'üöó',crime:true,minAge:16,category:'crime'},
                {id:'robbery',name:'Armed robbery',icon:'üî´',crime:true,minAge:18,category:'crime'},
                {id:'murder',name:'Murder someone',icon:'üî™',crime:true,minAge:16,category:'crime'},
                {id:'lottery',name:'Buy lottery ticket',icon:'üé´',cost:50,minAge:18,category:'financial'},
                {id:'casino',name:'Visit casino',icon:'üé∞',minAge:18,category:'financial'},
                {id:'plastic',name:'Plastic surgery',icon:'üíâ',cost:5000,minAge:18,category:'medical'},
                {id:'doctor',name:'Visit doctor',icon:'üë®‚Äç‚öïÔ∏è',effects:{health:15},cost:200,minAge:0,category:'medical'}
            ],
            
            jobs: {
                'Doctor':{salary:150000,req:{education:'University',smarts:90}},
                'Lawyer':{salary:120000,req:{education:'University',smarts:85}},
                'Engineer':{salary:95000,req:{education:'University',smarts:80}},
                'Teacher':{salary:55000,req:{education:'University',smarts:70}},
                'Nurse':{salary:65000,req:{education:'University',smarts:70}},
                'Police Officer':{salary:55000,req:{education:'High School',smarts:60}},
                'Chef':{salary:45000,req:{education:'High School',smarts:55}},
                'Cashier':{salary:25000,req:{education:'None',smarts:20}},
                'Janitor':{salary:28000,req:{education:'None',smarts:15}}
            },
            
            events: {
                child: [{text:'You made a new friend!',effects:{happiness:15}},{text:'You won a competition!',effects:{happiness:20,smarts:8}}],
                teen: [{text:'You aced your exam!',effects:{happiness:25,smarts:12}},{text:'You went to a party!',effects:{happiness:30}}],
                adult: [{text:'You got promoted!',effects:{happiness:30,money:10000}},{text:'You won the lottery!',effects:{happiness:60,money:50000}}],
                senior: [{text:'Your grandchild was born!',effects:{happiness:40}}]
            }
        };

        function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
        function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}
        function clamp(val,min=0,max=100){return Math.max(min,Math.min(max,val));}
        function money(amt){return '$'+Math.floor(amt).toLocaleString();}
        function generatePerson(gender){
            const g=gender||(Math.random()>0.5?'male':'female');
            const first=pick(DATA.names.first[g]);
            const last=pick(DATA.names.last);
            return{first,last,full:`${first} ${last}`,gender:g};
        }

        function startGame(random){
            const country=document.getElementById('country').value;
            if(random){
                game.gender=Math.random()>0.5?'male':'female';
                const p=generatePerson(game.gender);
                game.firstName=p.first;
                game.lastName=p.last;
            }else{
                game.firstName=document.getElementById('firstName').value||'John';
                game.lastName=document.getElementById('lastName').value||'Doe';
                game.gender=document.getElementById('gender').value;
            }
            game.fullName=`${game.firstName} ${game.lastName}`;
            game.country=country;
            game.city=pick(DATA.cities[country]);
            game.age=0;
            game.birthMonth=pick(DATA.months);
            game.zodiac=pick(DATA.zodiacs);
            game.health=100;
            game.happiness=100;
            game.smarts=rand(30,70);
            game.looks=rand(30,70);
            game.money=0;
            game.relationships=[];
            const mother=generatePerson('female');
            const father=generatePerson('male');
            game.relationships.push({name:mother.full,type:'Mother',level:100,age:rand(25,45),gender:'female'});
            game.relationships.push({name:father.full,type:'Father',level:100,age:rand(25,45),gender:'male'});
            if(Math.random()>0.6){
                const sib=generatePerson();
                game.relationships.push({name:sib.full,type:Math.random()>0.5?'Brother':'Sister',level:rand(60,100),age:rand(0,12),gender:sib.gender});
            }
            switchScreen('gameScreen');
            updateUI();
            updateStory();
            showView('main');
        }

        function switchScreen(id){
            document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function updateUI(){
            game.health=clamp(game.health);
            game.happiness=clamp(game.happiness);
            game.smarts=clamp(game.smarts);
            game.looks=clamp(game.looks);
            document.getElementById('charName').textContent=game.fullName;
            document.getElementById('balance').textContent=money(game.money);
            document.getElementById('avatar').textContent=getEmoji();
            document.getElementById('charStatus').textContent=getStatus();
            document.getElementById('healthBar').style.width=game.health+'%';
            document.getElementById('healthVal').textContent=Math.floor(game.health)+'%';
            document.getElementById('happinessBar').style.width=game.happiness+'%';
            document.getElementById('happinessVal').textContent=Math.floor(game.happiness)+'%';
            document.getElementById('smartsBar').style.width=game.smarts+'%';
            document.getElementById('smartsVal').textContent=Math.floor(game.smarts)+'%';
            document.getElementById('looksBar').style.width=game.looks+'%';
            document.getElementById('looksVal').textContent=Math.floor(game.looks)+'%';
            let label='Infant';
            if(game.age>=18)label=game.job?'Job':'Occupation';
            else if(game.age>=5)label='School';
            document.getElementById('occLabel').textContent=label;
        }

        function getEmoji(){
            if(game.age<2)return'üë∂';
            if(game.age<13)return game.gender==='male'?'üë¶':'üëß';
            if(game.age<18)return game.gender==='male'?'üßí':'üëß';
            if(game.age<40)return game.gender==='male'?'üë®':'üë©';
            if(game.age<60)return game.gender==='male'?'üßî':'üë©';
            return game.gender==='male'?'üë¥':'üëµ';
        }

        function getStatus(){
            if(game.age<5)return'Infant';
            if(game.age<13)return'Child';
            if(game.age<18)return'Teenager';
            if(game.age<65)return'Adult';
            return'Senior';
        }

        function updateStory(){
            let story=`<p><strong>Age: ${game.age} years</strong></p>`;
            if(game.age===0){
                story+=`<p>I was born ${game.gender==='male'?'a male':'a female'} in ${game.city}, ${game.country}.</p>`;
                story+=`<p>My birthday is ${game.birthMonth} ${rand(1,28)}. I am a ${game.zodiac}.</p>`;
                story+=`<p>My name is ${game.fullName}.</p>`;
                const mom=game.relationships.find(r=>r.type==='Mother');
                const dad=game.relationships.find(r=>r.type==='Father');
                if(mom)story+=`<p>My mother is ${mom.name} (age ${mom.age}).</p>`;
                if(dad)story+=`<p>My father is ${dad.name} (age ${dad.age}).</p>`;
                game.relationships.filter(r=>r.type==='Brother'||r.type==='Sister').forEach(sib=>{
                    story+=`<p>I have ${sib.type==='Brother'?'a brother':'a sister'} named ${sib.name} (age ${sib.age}).</p>`;
                });
            }else{
                story+=`<p>Life is ${game.happiness>70?'great':game.happiness>40?'okay':'difficult'}.</p>`;
                if(game.job)story+=`<p>I work as a ${game.job.name}.</p>`;
                if(game.education!=='None')story+=`<p>Education: ${game.education}.</p>`;
            }
            document.getElementById('story').innerHTML=story;
        }

        function showView(view){
            game.currentView=view;
            document.querySelectorAll('.game-view').forEach(v=>v.style.display='none');
            document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
            const backBtn=document.getElementById('backBtn');
            const menuBtn=document.getElementById('menuBtn');
            if(view==='main'){
                document.getElementById('mainView').style.display='block';
                backBtn.style.display='none';
                menuBtn.style.display='flex';
            }else{
                backBtn.style.display='flex';
                menuBtn.style.display='none';
                if(view==='activities'){
                    document.getElementById('activitiesView').style.display='block';
                    document.getElementById('navAct').classList.add('active');
                    renderActivities();
                }else if(view==='relationships'){
                    document.getElementById('relationshipsView').style.display='block';
                    document.getElementById('navRel').classList.add('active');
                    renderRelationships();
                }else if(view==='assets'){
                    document.getElementById('assetsView').style.display='block';
                    document.getElementById('navAssets').classList.add('active');
                    renderAssets();
                }else if(view==='occupation'){
                    document.getElementById('occupationView').style.display='block';
                    document.getElementById('navOcc').classList.add('active');
                    renderOccupation();
                }
            }
        }

        function goBack(){showView('main');}

        function renderActivities(){
            const list=document.getElementById('activitiesList');
            list.innerHTML='';
            const categories={mind:'Mind & Body',social:'Social',crime:'Crime',financial:'Financial',medical:'Medical'};
            Object.keys(categories).forEach(cat=>{
                const acts=DATA.activities.filter(a=>a.category===cat&&game.age>=(a.minAge||0));
                if(acts.length>0){
                    const header=document.createElement('div');
                    header.className='category-header';
                    header.textContent=categories[cat];
                    list.appendChild(header);
                    acts.forEach(act=>{
                        const div=document.createElement('div');
                        div.className='list-item';
                        div.onclick=()=>doActivity(act);
                        div.innerHTML=`
                            <div class="item-icon">${act.icon}</div>
                            <div class="item-text">
                                <div class="item-name">${act.name}</div>
                                ${act.cost?`<div class="item-desc">$${act.cost.toLocaleString()}</div>`:''}
                            </div>
                        `;
                        list.appendChild(div);
                    });
                }
            });
        }

        function doActivity(act){
            if(act.cost&&game.money<act.cost){
                addEvent("Can't afford this!",'negative');
                return;
            }
            if(act.crime)return handleCrime(act);
            if(act.id==='casino')return handleCasino();
            if(act.id==='lottery')return handleLottery();
            if(act.id==='plastic')return handlePlastic();
            if(act.cost)game.money-=act.cost;
            if(act.effects)applyEffects(act.effects);
            addEvent(`You did: ${act.name}`,'positive');
            updateUI();
        }

        function handleCrime(act){
            const success=game.smarts>70?Math.random()>0.35:Math.random()>0.55;
            if(success){
                const stolen=rand(500,10000);
                game.money+=stolen;
                game.happiness+=15;
                addEvent(`${act.name} succeeded! Got ${money(stolen)}!`,'positive');
                updateUI();
            }else{
                showModal('Arrested!','Police caught you!',`
                    <div class="choice-item" onclick="goToJail()"><div class="choice-text">Surrender</div></div>
                    <div class="choice-item" onclick="tryEscape()"><div class="choice-text">Try to Run!</div></div>
                `);
            }
        }

        function goToJail(){
            game.happiness-=35;
            game.health-=10;
            game.inPrison=true;
            addEvent('You went to prison.','negative');
            closeModal();
            updateUI();
        }

        function tryEscape(){
            if(Math.random()>0.75){
                addEvent('You escaped!','positive');
            }else{
                game.happiness-=45;
                game.health-=25;
                addEvent('You got caught!','negative');
            }
            closeModal();
            updateUI();
        }

        function handleCasino(){
            showModal('Casino','How much to bet?',`
                <div class="choice-item" onclick="gamble(100)"><div class="choice-text">$100</div></div>
                <div class="choice-item" onclick="gamble(500)"><div class="choice-text">$500</div></div>
                <div class="choice-item" onclick="gamble(1000)"><div class="choice-text">$1,000</div></div>
                <button class="close-btn" onclick="closeModal()">Cancel</button>
            `);
        }

        function gamble(amt){
            if(game.money<amt){
                addEvent("Not enough money!",'negative');
                closeModal();
                return;
            }
            if(Math.random()>0.5){
                game.money+=amt;
                addEvent(`Won ${money(amt)}!`,'positive');
            }else{
                game.money-=amt;
                addEvent(`Lost ${money(amt)}.`,'negative');
            }
            closeModal();
            updateUI();
        }

        function handleLottery(){
            if(game.money<50){
                addEvent("Need $50!",'negative');
                return;
            }
            game.money-=50;
            if(Math.random()>0.999){
                game.money+=1000000;
                addEvent('WON THE LOTTERY! $1,000,000!','positive');
            }else{
                addEvent('Ticket was a loser.','negative');
            }
            updateUI();
        }

        function handlePlastic(){
            if(game.money<5000){
                addEvent("Need $5,000!",'negative');
                return;
            }
            game.money-=5000;
            game.looks=clamp(game.looks+rand(10,30));
            addEvent('Surgery successful!','positive');
            updateUI();
        }

        function renderRelationships(){
            const list=document.getElementById('relationshipsList');
            list.innerHTML='';
            game.relationships.forEach((rel,idx)=>{
                const div=document.createElement('div');
                div.className='list-item';
                div.onclick=()=>showRelOptions(idx);
                const emoji=rel.gender==='male'?'üë®':'üë©';
                div.innerHTML=`
                    <div class="item-icon">${emoji}</div>
                    <div class="item-text">
                        <div class="item-name">${rel.name}</div>
                        <div class="item-desc">${rel.type}${rel.age?` (Age ${rel.age})`:''}</div>
                    </div>
                    <div class="relationship-bar">
                        <div class="relationship-fill" style="width:${rel.level}%"></div>
                    </div>
                `;
                list.appendChild(div);
            });
        }

        function showRelOptions(idx){
            const rel=game.relationships[idx];
            let html=`
                <div class="choice-item" onclick="spendTime(${idx})"><div class="choice-text">üí¨ Spend time</div></div>
                <div class="choice-item" onclick="compliment(${idx})"><div class="choice-text">üòä Compliment</div></div>
                <div class="choice-item" onclick="insult(${idx})"><div class="choice-text">üò† Insult</div></div>
            `;
            if(rel.type==='Partner'){
                html+=`<div class="choice-item" onclick="propose(${idx})"><div class="choice-text">üíç Propose</div></div>`;
            }
            html+=`<button class="close-btn" onclick="closeModal()">Close</button>`;
            showModal(rel.name,rel.type,html);
        }

        function spendTime(idx){
            game.relationships[idx].level=clamp(game.relationships[idx].level+rand(5,15));
            game.happiness+=10;
            addEvent(`Spent time with ${game.relationships[idx].name}.`,'positive');
            closeModal();
            updateUI();
        }

        function compliment(idx){
            game.relationships[idx].level=clamp(game.relationships[idx].level+rand(3,10));
            addEvent(`Complimented ${game.relationships[idx].name}.`,'positive');
            closeModal();
        }

        function insult(idx){
            game.relationships[idx].level=clamp(game.relationships[idx].level-rand(10,20));
            addEvent(`Insulted ${game.relationships[idx].name}.`,'negative');
            closeModal();
        }

        function propose(idx){
            const rel=game.relationships[idx];
            if(rel.level>70||Math.random()>0.3){
                rel.type='Spouse';
                game.happiness+=40;
                game.married=true;
                addEvent(`${rel.name} said YES! Married!`,'positive');
            }else{
                game.relationships.splice(idx,1);
                game.happiness-=35;
                addEvent(`${rel.name} said NO and left.`,'negative');
            }
            closeModal();
            updateUI();
        }

        function renderAssets(){
            const list=document.getElementById('assetsList');
            if(game.assets.length===0){
                list.innerHTML='<div style="padding:40px;text-align:center;color:#666;"><p>You don\'t own any assets yet.</p></div>';
            }else{
                list.innerHTML='';
                game.assets.forEach(asset=>{
                    const div=document.createElement('div');
                    div.className='list-item';
                    div.innerHTML=`
                        <div class="item-icon">${asset.icon}</div>
                        <div class="item-text">
                            <div class="item-name">${asset.name}</div>
                            <div class="item-desc">Value: ${money(asset.value)}</div>
                        </div>
                    `;
                    list.appendChild(div);
                });
            }
        }

        function renderOccupation(){
            const content=document.getElementById('occupationContent');
            if(game.age<5){
                document.getElementById('occTitle').textContent='Infant';
                content.innerHTML='<div style="padding:40px;text-align:center;"><p>Too young to work or go to school.</p></div>';
                return;
            }
            if(game.age<18){
                document.getElementById('occTitle').textContent='School';
                content.innerHTML='<div style="padding:20px;text-align:center;"><p>Currently in school. Study hard!</p></div>';
                return;
            }
            if(game.job){
                document.getElementById('occTitle').textContent='Your Job';
                content.innerHTML=`
                    <div style="padding:30px;text-align:center;">
                        <h3 style="margin-bottom:15px;">${game.job.name}</h3>
                        <p style="color:#16a34a;font-size:1.3rem;font-weight:700;margin-bottom:20px;">${money(game.job.salary)}/year</p>
                        <button class="close-btn" onclick="quitJob()" style="max-width:300px;margin:0 auto;">Quit Job</button>
                    </div>
                `;
            }else{
                document.getElementById('occTitle').textContent='Find a Job';
                content.innerHTML='';
                const available=[];
                for(let name in DATA.jobs){
                    const job=DATA.jobs[name];
                    if(job.req.education==='University'&&game.education!=='University')continue;
                    if(job.req.education==='High School'&&game.education==='None')continue;
                    if(job.req.smarts&&game.smarts<job.req.smarts)continue;
                    available.push({name,...job});
                }
                if(available.length===0){
                    content.innerHTML='<div style="padding:40px;text-align:center;"><p>No jobs available. Improve education!</p></div>';
                }else{
                    available.forEach(job=>{
                        const div=document.createElement('div');
                        div.className='list-item';
                        div.onclick=()=>getJob(job);
                        div.innerHTML=`
                            <div class="item-text">
                                <div class="item-name">${job.name}</div>
                                <div class="item-value">${money(job.salary)}/year</div>
                            </div>
                        `;
                        content.appendChild(div);
                    });
                }
            }
        }

        function getJob(job){
            game.job={name:job.name,salary:job.salary};
            addEvent(`Got hired as a ${job.name}!`,'positive');
            renderOccupation();
            updateUI();
        }

        function quitJob(){
            game.job=null;
            addEvent('Quit your job.','negative');
            renderOccupation();
            updateUI();
        }

        function applyEffects(effects){
            for(let key in effects){
                if(key==='money'){
                    game.money=Math.max(0,game.money+effects[key]);
                }else if(game.hasOwnProperty(key)){
                    game[key]=clamp(game[key]+effects[key]);
                }
            }
            updateUI();
        }

        function addEvent(text,type=''){
            const container=document.getElementById('eventsContainer');
            const event=document.createElement('div');
            event.className='event-item '+type;
            event.innerHTML=`<div class="event-text">${text}</div>`;
            container.insertBefore(event,container.firstChild);
            while(container.children.length>10){
                container.removeChild(container.lastChild);
            }
        }

        function ageUp(){
            game.age++;
            if(game.age>30)game.health-=rand(1,3);
            if(game.age>50){
                game.health-=rand(2,5);
                game.looks-=rand(1,3);
            }
            if(game.age>70){
                game.health-=rand(3,7);
                game.looks-=rand(2,4);
            }
            if(game.job){
                const salary=game.job.salary+rand(-3000,3000);
                game.money+=salary;
                addEvent(`Earned ${money(salary)} from work.`,'positive');
            }
            triggerEvent();
            if(game.age===6)addEvent('Started school!','positive');
            if(game.age===18){
                addEvent('Graduated high school!','positive');
                showEducationChoice();
            }
            if(game.age===65&&game.job){
                game.job=null;
                addEvent('You retired!','positive');
            }
            if(game.health<=0||game.age>=120){
                die();
                return;
            }
            const deathChance=game.age>80?(game.age-80)*0.01:0;
            if(Math.random()<deathChance){
                die();
                return;
            }
            updateUI();
            updateStory();
            showView('main');
        }

        function triggerEvent(){
            let pool=[];
            if(game.age>=5&&game.age<13)pool=DATA.events.child;
            else if(game.age>=13&&game.age<18)pool=DATA.events.teen;
            else if(game.age>=18&&game.age<65)pool=DATA.events.adult;
            else if(game.age>=65)pool=DATA.events.senior;
            if(pool.length>0&&Math.random()>0.6){
                const event=pick(pool);
                applyEffects(event.effects);
                addEvent(event.text,event.effects.happiness>15?'positive':event.effects.happiness<-10?'negative':'');
            }
        }

        function showEducationChoice(){
            showModal('Education','What do you want to do?',`
                <div class="choice-item" onclick="chooseUni()"><div class="choice-text">üéì University ($50,000)</div></div>
                <div class="choice-item" onclick="chooseWork()"><div class="choice-text">üíº Start Working</div></div>
            `);
        }

        function chooseUni(){
            if(game.money>=50000&&game.smarts>=60){
                game.money-=50000;
                game.education='University';
                game.smarts=clamp(game.smarts+25);
                addEvent('Enrolled in university!','positive');
                closeModal();
                updateUI();
            }else if(game.money<50000){
                addEvent('Need $50,000!','negative');
            }else{
                addEvent('Grades not good enough!','negative');
            }
        }

        function chooseWork(){
            game.education='High School';
            addEvent('Started working!');
            closeModal();
        }

        function showModal(title,subtitle,body){
            document.getElementById('modalTitle').textContent=title;
            document.getElementById('modalSubtitle').textContent=subtitle;
            document.getElementById('modalBody').innerHTML=body;
            document.getElementById('modal').classList.add('active');
        }

        function closeModal(){
            document.getElementById('modal').classList.remove('active');
        }

        function die(){
            const causes=['Passed away peacefully.','Died from natural causes.','Health declined.','Lived a full life.'];
            document.getElementById('deathMsg').textContent=pick(causes);
            document.getElementById('finalAge').textContent=game.age+' years';
            document.getElementById('finalMoney').textContent=money(game.money);
            document.getElementById('finalCareer').textContent=game.job?game.job.name:'Unemployed';
            document.getElementById('finalHappy').textContent=Math.floor(game.happiness)+'%';
            switchScreen('deathScreen');
        }

        document.getElementById('modal').onclick=(e)=>{
            if(e.target.id==='modal')closeModal();
        };
    </script>
</body>
</html>